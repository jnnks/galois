defmodule AddTest do
  use ExUnit.Case

  @tag :gen_test_add
  test "GF(2, 1) add" do
    gf = GF.new(2, 1, [1,1])
    assert 0 == GF.add(gf, 0, 0)
    assert 1 == GF.add(gf, 0, 1)
    assert 1 == GF.add(gf, 1, 0)
    assert 0 == GF.add(gf, 1, 1)
  end

  @tag :gen_test_add
  test "GF(2, 2) add" do
    gf = GF.new(2, 2, [1,1,1])
    assert 0 == GF.add(gf, 0, 0)
    assert 1 == GF.add(gf, 0, 1)
    assert 2 == GF.add(gf, 0, 2)
    assert 3 == GF.add(gf, 0, 3)
    assert 1 == GF.add(gf, 1, 0)
    assert 0 == GF.add(gf, 1, 1)
    assert 3 == GF.add(gf, 1, 2)
    assert 2 == GF.add(gf, 1, 3)
    assert 2 == GF.add(gf, 2, 0)
    assert 3 == GF.add(gf, 2, 1)
    assert 0 == GF.add(gf, 2, 2)
    assert 1 == GF.add(gf, 2, 3)
    assert 3 == GF.add(gf, 3, 0)
    assert 2 == GF.add(gf, 3, 1)
    assert 1 == GF.add(gf, 3, 2)
    assert 0 == GF.add(gf, 3, 3)
  end

  @tag :gen_test_add
  test "GF(2, 3) add" do
    gf = GF.new(2, 3, [1,1,0,1])
    assert 0 == GF.add(gf, 0, 0)
    assert 1 == GF.add(gf, 0, 1)
    assert 2 == GF.add(gf, 0, 2)
    assert 3 == GF.add(gf, 0, 3)
    assert 4 == GF.add(gf, 0, 4)
    assert 5 == GF.add(gf, 0, 5)
    assert 6 == GF.add(gf, 0, 6)
    assert 7 == GF.add(gf, 0, 7)
    assert 1 == GF.add(gf, 1, 0)
    assert 0 == GF.add(gf, 1, 1)
    assert 3 == GF.add(gf, 1, 2)
    assert 2 == GF.add(gf, 1, 3)
    assert 5 == GF.add(gf, 1, 4)
    assert 4 == GF.add(gf, 1, 5)
    assert 7 == GF.add(gf, 1, 6)
    assert 6 == GF.add(gf, 1, 7)
    assert 2 == GF.add(gf, 2, 0)
    assert 3 == GF.add(gf, 2, 1)
    assert 0 == GF.add(gf, 2, 2)
    assert 1 == GF.add(gf, 2, 3)
    assert 6 == GF.add(gf, 2, 4)
    assert 7 == GF.add(gf, 2, 5)
    assert 4 == GF.add(gf, 2, 6)
    assert 5 == GF.add(gf, 2, 7)
    assert 3 == GF.add(gf, 3, 0)
    assert 2 == GF.add(gf, 3, 1)
    assert 1 == GF.add(gf, 3, 2)
    assert 0 == GF.add(gf, 3, 3)
    assert 7 == GF.add(gf, 3, 4)
    assert 6 == GF.add(gf, 3, 5)
    assert 5 == GF.add(gf, 3, 6)
    assert 4 == GF.add(gf, 3, 7)
    assert 4 == GF.add(gf, 4, 0)
    assert 5 == GF.add(gf, 4, 1)
    assert 6 == GF.add(gf, 4, 2)
    assert 7 == GF.add(gf, 4, 3)
    assert 0 == GF.add(gf, 4, 4)
    assert 1 == GF.add(gf, 4, 5)
    assert 2 == GF.add(gf, 4, 6)
    assert 3 == GF.add(gf, 4, 7)
    assert 5 == GF.add(gf, 5, 0)
    assert 4 == GF.add(gf, 5, 1)
    assert 7 == GF.add(gf, 5, 2)
    assert 6 == GF.add(gf, 5, 3)
    assert 1 == GF.add(gf, 5, 4)
    assert 0 == GF.add(gf, 5, 5)
    assert 3 == GF.add(gf, 5, 6)
    assert 2 == GF.add(gf, 5, 7)
    assert 6 == GF.add(gf, 6, 0)
    assert 7 == GF.add(gf, 6, 1)
    assert 4 == GF.add(gf, 6, 2)
    assert 5 == GF.add(gf, 6, 3)
    assert 2 == GF.add(gf, 6, 4)
    assert 3 == GF.add(gf, 6, 5)
    assert 0 == GF.add(gf, 6, 6)
    assert 1 == GF.add(gf, 6, 7)
    assert 7 == GF.add(gf, 7, 0)
    assert 6 == GF.add(gf, 7, 1)
    assert 5 == GF.add(gf, 7, 2)
    assert 4 == GF.add(gf, 7, 3)
    assert 3 == GF.add(gf, 7, 4)
    assert 2 == GF.add(gf, 7, 5)
    assert 1 == GF.add(gf, 7, 6)
    assert 0 == GF.add(gf, 7, 7)
  end

  @tag :gen_test_add
  test "GF(3, 1) add" do
    gf = GF.new(3, 1, [1,1])
    assert 0 == GF.add(gf, 0, 0)
    assert 1 == GF.add(gf, 0, 1)
    assert 2 == GF.add(gf, 0, 2)
    assert 1 == GF.add(gf, 1, 0)
    assert 2 == GF.add(gf, 1, 1)
    assert 0 == GF.add(gf, 1, 2)
    assert 2 == GF.add(gf, 2, 0)
    assert 0 == GF.add(gf, 2, 1)
    assert 1 == GF.add(gf, 2, 2)
  end

  @tag :gen_test_add
  test "GF(3, 2) add" do
    gf = GF.new(3, 2, [2,2,1])
    assert 0 == GF.add(gf, 0, 0)
    assert 1 == GF.add(gf, 0, 1)
    assert 2 == GF.add(gf, 0, 2)
    assert 3 == GF.add(gf, 0, 3)
    assert 4 == GF.add(gf, 0, 4)
    assert 5 == GF.add(gf, 0, 5)
    assert 6 == GF.add(gf, 0, 6)
    assert 7 == GF.add(gf, 0, 7)
    assert 8 == GF.add(gf, 0, 8)
    assert 1 == GF.add(gf, 1, 0)
    assert 2 == GF.add(gf, 1, 1)
    assert 0 == GF.add(gf, 1, 2)
    assert 4 == GF.add(gf, 1, 3)
    assert 5 == GF.add(gf, 1, 4)
    assert 3 == GF.add(gf, 1, 5)
    assert 7 == GF.add(gf, 1, 6)
    assert 8 == GF.add(gf, 1, 7)
    assert 6 == GF.add(gf, 1, 8)
    assert 2 == GF.add(gf, 2, 0)
    assert 0 == GF.add(gf, 2, 1)
    assert 1 == GF.add(gf, 2, 2)
    assert 5 == GF.add(gf, 2, 3)
    assert 3 == GF.add(gf, 2, 4)
    assert 4 == GF.add(gf, 2, 5)
    assert 8 == GF.add(gf, 2, 6)
    assert 6 == GF.add(gf, 2, 7)
    assert 7 == GF.add(gf, 2, 8)
    assert 3 == GF.add(gf, 3, 0)
    assert 4 == GF.add(gf, 3, 1)
    assert 5 == GF.add(gf, 3, 2)
    assert 6 == GF.add(gf, 3, 3)
    assert 7 == GF.add(gf, 3, 4)
    assert 8 == GF.add(gf, 3, 5)
    assert 0 == GF.add(gf, 3, 6)
    assert 1 == GF.add(gf, 3, 7)
    assert 2 == GF.add(gf, 3, 8)
    assert 4 == GF.add(gf, 4, 0)
    assert 5 == GF.add(gf, 4, 1)
    assert 3 == GF.add(gf, 4, 2)
    assert 7 == GF.add(gf, 4, 3)
    assert 8 == GF.add(gf, 4, 4)
    assert 6 == GF.add(gf, 4, 5)
    assert 1 == GF.add(gf, 4, 6)
    assert 2 == GF.add(gf, 4, 7)
    assert 0 == GF.add(gf, 4, 8)
    assert 5 == GF.add(gf, 5, 0)
    assert 3 == GF.add(gf, 5, 1)
    assert 4 == GF.add(gf, 5, 2)
    assert 8 == GF.add(gf, 5, 3)
    assert 6 == GF.add(gf, 5, 4)
    assert 7 == GF.add(gf, 5, 5)
    assert 2 == GF.add(gf, 5, 6)
    assert 0 == GF.add(gf, 5, 7)
    assert 1 == GF.add(gf, 5, 8)
    assert 6 == GF.add(gf, 6, 0)
    assert 7 == GF.add(gf, 6, 1)
    assert 8 == GF.add(gf, 6, 2)
    assert 0 == GF.add(gf, 6, 3)
    assert 1 == GF.add(gf, 6, 4)
    assert 2 == GF.add(gf, 6, 5)
    assert 3 == GF.add(gf, 6, 6)
    assert 4 == GF.add(gf, 6, 7)
    assert 5 == GF.add(gf, 6, 8)
    assert 7 == GF.add(gf, 7, 0)
    assert 8 == GF.add(gf, 7, 1)
    assert 6 == GF.add(gf, 7, 2)
    assert 1 == GF.add(gf, 7, 3)
    assert 2 == GF.add(gf, 7, 4)
    assert 0 == GF.add(gf, 7, 5)
    assert 4 == GF.add(gf, 7, 6)
    assert 5 == GF.add(gf, 7, 7)
    assert 3 == GF.add(gf, 7, 8)
    assert 8 == GF.add(gf, 8, 0)
    assert 6 == GF.add(gf, 8, 1)
    assert 7 == GF.add(gf, 8, 2)
    assert 2 == GF.add(gf, 8, 3)
    assert 0 == GF.add(gf, 8, 4)
    assert 1 == GF.add(gf, 8, 5)
    assert 5 == GF.add(gf, 8, 6)
    assert 3 == GF.add(gf, 8, 7)
    assert 4 == GF.add(gf, 8, 8)
  end

  @tag :gen_test_add
  test "GF(3, 3) add" do
    gf = GF.new(3, 3, [1,2,0,1])
    assert 7 == GF.add(gf, 0, 7)
    assert 11 == GF.add(gf, 0, 11)
    assert 3 == GF.add(gf, 0, 3)
    assert 18 == GF.add(gf, 0, 18)
    assert 26 == GF.add(gf, 0, 26)
    assert 20 == GF.add(gf, 1, 19)
    assert 8 == GF.add(gf, 1, 7)
    assert 19 == GF.add(gf, 1, 18)
    assert 11 == GF.add(gf, 2, 9)
    assert 11 == GF.add(gf, 2, 9)
    assert 3 == GF.add(gf, 2, 4)
    assert 9 == GF.add(gf, 2, 10)
    assert 10 == GF.add(gf, 3, 16)
    assert 13 == GF.add(gf, 3, 10)
    assert 10 == GF.add(gf, 4, 15)
    assert 8 == GF.add(gf, 5, 3)
    assert 1 == GF.add(gf, 5, 8)
    assert 18 == GF.add(gf, 5, 25)
    assert 3 == GF.add(gf, 5, 1)
    assert 19 == GF.add(gf, 5, 26)
    assert 17 == GF.add(gf, 5, 12)
    assert 3 == GF.add(gf, 5, 1)
    assert 16 == GF.add(gf, 6, 10)
    assert 8 == GF.add(gf, 6, 2)
    assert 8 == GF.add(gf, 6, 2)
    assert 9 == GF.add(gf, 6, 12)
    assert 14 == GF.add(gf, 6, 17)
    assert 19 == GF.add(gf, 6, 22)
    assert 20 == GF.add(gf, 8, 21)
    assert 18 == GF.add(gf, 8, 22)
    assert 21 == GF.add(gf, 8, 25)
    assert 11 == GF.add(gf, 8, 12)
    assert 0 == GF.add(gf, 9, 18)
    assert 5 == GF.add(gf, 9, 23)
    assert 12 == GF.add(gf, 9, 3)
    assert 18 == GF.add(gf, 9, 9)
    assert 0 == GF.add(gf, 10, 20)
    assert 0 == GF.add(gf, 10, 20)
    assert 0 == GF.add(gf, 11, 19)
    assert 22 == GF.add(gf, 11, 14)
    assert 3 == GF.add(gf, 11, 22)
    assert 19 == GF.add(gf, 11, 11)
    assert 6 == GF.add(gf, 11, 25)
    assert 4 == GF.add(gf, 12, 19)
    assert 25 == GF.add(gf, 13, 12)
    assert 16 == GF.add(gf, 13, 3)
    assert 9 == GF.add(gf, 13, 8)
    assert 1 == GF.add(gf, 14, 26)
    assert 7 == GF.add(gf, 14, 23)
    assert 14 == GF.add(gf, 14, 0)
    assert 22 == GF.add(gf, 15, 16)
    assert 6 == GF.add(gf, 15, 18)
    assert 12 == GF.add(gf, 15, 6)
    assert 4 == GF.add(gf, 15, 25)
    assert 13 == GF.add(gf, 15, 7)
    assert 1 == GF.add(gf, 15, 22)
    assert 26 == GF.add(gf, 16, 10)
    assert 9 == GF.add(gf, 16, 5)
    assert 23 == GF.add(gf, 17, 15)
    assert 25 == GF.add(gf, 17, 11)
    assert 16 == GF.add(gf, 17, 2)
    assert 23 == GF.add(gf, 18, 5)
    assert 7 == GF.add(gf, 18, 16)
    assert 23 == GF.add(gf, 18, 5)
    assert 26 == GF.add(gf, 18, 8)
    assert 15 == GF.add(gf, 19, 26)
    assert 8 == GF.add(gf, 19, 16)
    assert 24 == GF.add(gf, 20, 7)
    assert 3 == GF.add(gf, 20, 13)
    assert 11 == GF.add(gf, 21, 26)
    assert 22 == GF.add(gf, 21, 1)
    assert 7 == GF.add(gf, 21, 13)
    assert 2 == GF.add(gf, 21, 17)
    assert 1 == GF.add(gf, 21, 16)
    assert 21 == GF.add(gf, 22, 2)
    assert 11 == GF.add(gf, 22, 25)
    assert 24 == GF.add(gf, 23, 4)
    assert 17 == GF.add(gf, 23, 21)
    assert 10 == GF.add(gf, 24, 22)
    assert 16 == GF.add(gf, 24, 19)
    assert 12 == GF.add(gf, 24, 24)
    assert 26 == GF.add(gf, 24, 2)
    assert 24 == GF.add(gf, 24, 0)
    assert 25 == GF.add(gf, 25, 0)
    assert 3 == GF.add(gf, 25, 17)
    assert 0 == GF.add(gf, 25, 14)
    assert 1 == GF.add(gf, 25, 12)
    assert 0 == GF.add(gf, 25, 14)
    assert 2 == GF.add(gf, 25, 13)
    assert 4 == GF.add(gf, 25, 15)
    assert 1 == GF.add(gf, 25, 12)
    assert 26 == GF.add(gf, 25, 1)
    assert 4 == GF.add(gf, 26, 17)
    assert 15 == GF.add(gf, 26, 19)
    assert 14 == GF.add(gf, 26, 24)
    assert 11 == GF.add(gf, 26, 21)
    assert 24 == GF.add(gf, 26, 1)
    assert 16 == GF.add(gf, 26, 20)
    assert 2 == GF.add(gf, 26, 12)
    assert 25 == GF.add(gf, 26, 2)
  end

  @tag :gen_test_add
  test "GF(5, 1) add" do
    gf = GF.new(5, 1, [3,1])
    assert 0 == GF.add(gf, 0, 0)
    assert 1 == GF.add(gf, 0, 1)
    assert 2 == GF.add(gf, 0, 2)
    assert 3 == GF.add(gf, 0, 3)
    assert 4 == GF.add(gf, 0, 4)
    assert 1 == GF.add(gf, 1, 0)
    assert 2 == GF.add(gf, 1, 1)
    assert 3 == GF.add(gf, 1, 2)
    assert 4 == GF.add(gf, 1, 3)
    assert 0 == GF.add(gf, 1, 4)
    assert 2 == GF.add(gf, 2, 0)
    assert 3 == GF.add(gf, 2, 1)
    assert 4 == GF.add(gf, 2, 2)
    assert 0 == GF.add(gf, 2, 3)
    assert 1 == GF.add(gf, 2, 4)
    assert 3 == GF.add(gf, 3, 0)
    assert 4 == GF.add(gf, 3, 1)
    assert 0 == GF.add(gf, 3, 2)
    assert 1 == GF.add(gf, 3, 3)
    assert 2 == GF.add(gf, 3, 4)
    assert 4 == GF.add(gf, 4, 0)
    assert 0 == GF.add(gf, 4, 1)
    assert 1 == GF.add(gf, 4, 2)
    assert 2 == GF.add(gf, 4, 3)
    assert 3 == GF.add(gf, 4, 4)
  end

  @tag :gen_test_add
  test "GF(5, 2) add" do
    gf = GF.new(5, 2, [2,4,1])
    assert 4 == GF.add(gf, 0, 4)
    assert 0 == GF.add(gf, 0, 0)
    assert 24 == GF.add(gf, 1, 23)
    assert 7 == GF.add(gf, 1, 6)
    assert 8 == GF.add(gf, 1, 7)
    assert 2 == GF.add(gf, 2, 0)
    assert 17 == GF.add(gf, 3, 19)
    assert 21 == GF.add(gf, 3, 23)
    assert 9 == GF.add(gf, 3, 6)
    assert 22 == GF.add(gf, 3, 24)
    assert 12 == GF.add(gf, 4, 13)
    assert 4 == GF.add(gf, 4, 0)
    assert 6 == GF.add(gf, 4, 7)
    assert 6 == GF.add(gf, 4, 7)
    assert 6 == GF.add(gf, 4, 7)
    assert 16 == GF.add(gf, 5, 11)
    assert 6 == GF.add(gf, 5, 1)
    assert 8 == GF.add(gf, 5, 3)
    assert 20 == GF.add(gf, 5, 15)
    assert 0 == GF.add(gf, 5, 20)
    assert 15 == GF.add(gf, 5, 10)
    assert 2 == GF.add(gf, 5, 22)
    assert 19 == GF.add(gf, 6, 13)
    assert 14 == GF.add(gf, 6, 8)
    assert 24 == GF.add(gf, 6, 18)
    assert 17 == GF.add(gf, 6, 11)
    assert 15 == GF.add(gf, 7, 13)
    assert 1 == GF.add(gf, 7, 24)
    assert 1 == GF.add(gf, 7, 24)
    assert 22 == GF.add(gf, 8, 19)
    assert 10 == GF.add(gf, 8, 7)
    assert 17 == GF.add(gf, 8, 14)
    assert 24 == GF.add(gf, 8, 16)
    assert 13 == GF.add(gf, 8, 5)
    assert 22 == GF.add(gf, 8, 19)
    assert 2 == GF.add(gf, 8, 24)
    assert 7 == GF.add(gf, 9, 3)
    assert 7 == GF.add(gf, 9, 3)
    assert 3 == GF.add(gf, 9, 24)
    assert 9 == GF.add(gf, 9, 0)
    assert 14 == GF.add(gf, 10, 4)
    assert 19 == GF.add(gf, 10, 9)
    assert 14 == GF.add(gf, 10, 4)
    assert 17 == GF.add(gf, 10, 7)
    assert 4 == GF.add(gf, 11, 18)
    assert 9 == GF.add(gf, 11, 23)
    assert 9 == GF.add(gf, 11, 23)
    assert 21 == GF.add(gf, 12, 14)
    assert 12 == GF.add(gf, 12, 0)
    assert 22 == GF.add(gf, 12, 10)
    assert 7 == GF.add(gf, 12, 20)
    assert 2 == GF.add(gf, 12, 15)
    assert 19 == GF.add(gf, 13, 6)
    assert 1 == GF.add(gf, 13, 18)
    assert 17 == GF.add(gf, 14, 8)
    assert 23 == GF.add(gf, 14, 14)
    assert 18 == GF.add(gf, 14, 9)
    assert 3 == GF.add(gf, 14, 19)
    assert 17 == GF.add(gf, 14, 8)
    assert 3 == GF.add(gf, 15, 13)
    assert 0 == GF.add(gf, 15, 10)
    assert 18 == GF.add(gf, 15, 3)
    assert 10 == GF.add(gf, 15, 20)
    assert 2 == GF.add(gf, 16, 11)
    assert 18 == GF.add(gf, 16, 2)
    assert 21 == GF.add(gf, 16, 5)
    assert 12 == GF.add(gf, 16, 21)
    assert 3 == GF.add(gf, 16, 12)
    assert 2 == GF.add(gf, 16, 11)
    assert 21 == GF.add(gf, 17, 9)
    assert 7 == GF.add(gf, 17, 15)
    assert 2 == GF.add(gf, 17, 10)
    assert 16 == GF.add(gf, 18, 3)
    assert 16 == GF.add(gf, 18, 3)
    assert 2 == GF.add(gf, 18, 14)
    assert 5 == GF.add(gf, 18, 17)
    assert 11 == GF.add(gf, 18, 23)
    assert 14 == GF.add(gf, 18, 21)
    assert 23 == GF.add(gf, 19, 9)
    assert 15 == GF.add(gf, 20, 20)
    assert 24 == GF.add(gf, 20, 4)
    assert 23 == GF.add(gf, 20, 3)
    assert 0 == GF.add(gf, 20, 5)
    assert 21 == GF.add(gf, 21, 0)
    assert 10 == GF.add(gf, 21, 19)
    assert 5 == GF.add(gf, 21, 14)
    assert 18 == GF.add(gf, 21, 22)
    assert 2 == GF.add(gf, 21, 6)
    assert 5 == GF.add(gf, 21, 14)
    assert 5 == GF.add(gf, 22, 13)
    assert 21 == GF.add(gf, 22, 4)
    assert 11 == GF.add(gf, 22, 19)
    assert 21 == GF.add(gf, 22, 4)
    assert 6 == GF.add(gf, 22, 14)
    assert 3 == GF.add(gf, 22, 6)
    assert 16 == GF.add(gf, 23, 23)
    assert 17 == GF.add(gf, 23, 24)
    assert 12 == GF.add(gf, 24, 18)
    assert 6 == GF.add(gf, 24, 12)
    assert 0 == GF.add(gf, 24, 6)
  end

  @tag :gen_test_add
  test "GF(5, 3) add" do
    gf = GF.new(5, 3, [3,3,0,1])
    assert 113 == GF.add(gf, 1, 112)
    assert 29 == GF.add(gf, 4, 25)
    assert 28 == GF.add(gf, 5, 48)
    assert 35 == GF.add(gf, 6, 34)
    assert 80 == GF.add(gf, 6, 79)
    assert 54 == GF.add(gf, 7, 72)
    assert 29 == GF.add(gf, 7, 47)
    assert 120 == GF.add(gf, 9, 116)
    assert 46 == GF.add(gf, 9, 42)
    assert 107 == GF.add(gf, 9, 103)
    assert 37 == GF.add(gf, 10, 27)
    assert 44 == GF.add(gf, 11, 33)
    assert 3 == GF.add(gf, 14, 19)
    assert 57 == GF.add(gf, 15, 67)
    assert 1 == GF.add(gf, 16, 10)
    assert 112 == GF.add(gf, 17, 120)
    assert 10 == GF.add(gf, 19, 21)
    assert 73 == GF.add(gf, 19, 59)
    assert 116 == GF.add(gf, 20, 121)
    assert 57 == GF.add(gf, 21, 61)
    assert 61 == GF.add(gf, 22, 69)
    assert 58 == GF.add(gf, 22, 61)
    assert 25 == GF.add(gf, 22, 33)
    assert 109 == GF.add(gf, 22, 112)
    assert 113 == GF.add(gf, 23, 115)
    assert 78 == GF.add(gf, 24, 84)
    assert 78 == GF.add(gf, 26, 52)
    assert 43 == GF.add(gf, 26, 17)
    assert 75 == GF.add(gf, 28, 52)
    assert 84 == GF.add(gf, 29, 55)
    assert 69 == GF.add(gf, 30, 39)
    assert 7 == GF.add(gf, 32, 100)
    assert 44 == GF.add(gf, 33, 11)
    assert 108 == GF.add(gf, 35, 98)
    assert 70 == GF.add(gf, 36, 39)
    assert 57 == GF.add(gf, 36, 46)
    assert 76 == GF.add(gf, 37, 69)
    assert 29 == GF.add(gf, 42, 12)
    assert 9 == GF.add(gf, 46, 113)
    assert 50 == GF.add(gf, 50, 0)
    assert 83 == GF.add(gf, 51, 32)
    assert 65 == GF.add(gf, 56, 14)
    assert 69 == GF.add(gf, 57, 12)
    assert 79 == GF.add(gf, 58, 46)
    assert 90 == GF.add(gf, 64, 31)
    assert 110 == GF.add(gf, 64, 51)
    assert 57 == GF.add(gf, 65, 17)
    assert 60 == GF.add(gf, 67, 23)
    assert 119 == GF.add(gf, 67, 52)
    assert 108 == GF.add(gf, 67, 66)
    assert 112 == GF.add(gf, 68, 74)
    assert 18 == GF.add(gf, 69, 79)
    assert 19 == GF.add(gf, 70, 99)
    assert 24 == GF.add(gf, 71, 78)
    assert 48 == GF.add(gf, 72, 101)
    assert 93 == GF.add(gf, 73, 45)
    assert 120 == GF.add(gf, 78, 47)
    assert 19 == GF.add(gf, 80, 64)
    assert 58 == GF.add(gf, 81, 102)
    assert 53 == GF.add(gf, 81, 122)
    assert 51 == GF.add(gf, 82, 124)
    assert 87 == GF.add(gf, 82, 5)
    assert 12 == GF.add(gf, 82, 55)
    assert 80 == GF.add(gf, 85, 20)
    assert 70 == GF.add(gf, 85, 110)
    assert 17 == GF.add(gf, 85, 57)
    assert 102 == GF.add(gf, 86, 41)
    assert 64 == GF.add(gf, 87, 102)
    assert 97 == GF.add(gf, 88, 14)
    assert 89 == GF.add(gf, 89, 0)
    assert 62 == GF.add(gf, 89, 103)
    assert 16 == GF.add(gf, 94, 52)
    assert 94 == GF.add(gf, 95, 24)
    assert 48 == GF.add(gf, 95, 78)
    assert 78 == GF.add(gf, 96, 7)
    assert 100 == GF.add(gf, 97, 33)
    assert 36 == GF.add(gf, 99, 92)
    assert 83 == GF.add(gf, 100, 108)
    assert 115 == GF.add(gf, 102, 18)
    assert 100 == GF.add(gf, 106, 24)
    assert 120 == GF.add(gf, 106, 19)
    assert 4 == GF.add(gf, 106, 48)
    assert 113 == GF.add(gf, 107, 6)
    assert 82 == GF.add(gf, 107, 100)
    assert 8 == GF.add(gf, 108, 25)
    assert 36 == GF.add(gf, 109, 57)
    assert 43 == GF.add(gf, 111, 57)
    assert 6 == GF.add(gf, 112, 49)
    assert 100 == GF.add(gf, 113, 17)
    assert 123 == GF.add(gf, 114, 14)
    assert 114 == GF.add(gf, 115, 24)
    assert 100 == GF.add(gf, 115, 10)
    assert 106 == GF.add(gf, 119, 17)
    assert 20 == GF.add(gf, 120, 25)
    assert 75 == GF.add(gf, 121, 109)
    assert 107 == GF.add(gf, 121, 11)
    assert 39 == GF.add(gf, 122, 67)
    assert 62 == GF.add(gf, 122, 90)
    assert 49 == GF.add(gf, 123, 51)
    assert 56 == GF.add(gf, 124, 87)
  end

  @tag :gen_test_add
  test "GF(7, 1) add" do
    gf = GF.new(7, 1, [4,1])
    assert 0 == GF.add(gf, 0, 0)
    assert 1 == GF.add(gf, 0, 1)
    assert 2 == GF.add(gf, 0, 2)
    assert 3 == GF.add(gf, 0, 3)
    assert 4 == GF.add(gf, 0, 4)
    assert 5 == GF.add(gf, 0, 5)
    assert 6 == GF.add(gf, 0, 6)
    assert 1 == GF.add(gf, 1, 0)
    assert 2 == GF.add(gf, 1, 1)
    assert 3 == GF.add(gf, 1, 2)
    assert 4 == GF.add(gf, 1, 3)
    assert 5 == GF.add(gf, 1, 4)
    assert 6 == GF.add(gf, 1, 5)
    assert 0 == GF.add(gf, 1, 6)
    assert 2 == GF.add(gf, 2, 0)
    assert 3 == GF.add(gf, 2, 1)
    assert 4 == GF.add(gf, 2, 2)
    assert 5 == GF.add(gf, 2, 3)
    assert 6 == GF.add(gf, 2, 4)
    assert 0 == GF.add(gf, 2, 5)
    assert 1 == GF.add(gf, 2, 6)
    assert 3 == GF.add(gf, 3, 0)
    assert 4 == GF.add(gf, 3, 1)
    assert 5 == GF.add(gf, 3, 2)
    assert 6 == GF.add(gf, 3, 3)
    assert 0 == GF.add(gf, 3, 4)
    assert 1 == GF.add(gf, 3, 5)
    assert 2 == GF.add(gf, 3, 6)
    assert 4 == GF.add(gf, 4, 0)
    assert 5 == GF.add(gf, 4, 1)
    assert 6 == GF.add(gf, 4, 2)
    assert 0 == GF.add(gf, 4, 3)
    assert 1 == GF.add(gf, 4, 4)
    assert 2 == GF.add(gf, 4, 5)
    assert 3 == GF.add(gf, 4, 6)
    assert 5 == GF.add(gf, 5, 0)
    assert 6 == GF.add(gf, 5, 1)
    assert 0 == GF.add(gf, 5, 2)
    assert 1 == GF.add(gf, 5, 3)
    assert 2 == GF.add(gf, 5, 4)
    assert 3 == GF.add(gf, 5, 5)
    assert 4 == GF.add(gf, 5, 6)
    assert 6 == GF.add(gf, 6, 0)
    assert 0 == GF.add(gf, 6, 1)
    assert 1 == GF.add(gf, 6, 2)
    assert 2 == GF.add(gf, 6, 3)
    assert 3 == GF.add(gf, 6, 4)
    assert 4 == GF.add(gf, 6, 5)
    assert 5 == GF.add(gf, 6, 6)
  end

  @tag :gen_test_add
  test "GF(7, 2) add" do
    gf = GF.new(7, 2, [3,6,1])
    assert 19 == GF.add(gf, 0, 19)
    assert 37 == GF.add(gf, 0, 37)
    assert 47 == GF.add(gf, 1, 46)
    assert 27 == GF.add(gf, 1, 26)
    assert 23 == GF.add(gf, 1, 22)
    assert 31 == GF.add(gf, 1, 30)
    assert 37 == GF.add(gf, 2, 35)
    assert 46 == GF.add(gf, 2, 44)
    assert 40 == GF.add(gf, 4, 36)
    assert 16 == GF.add(gf, 5, 18)
    assert 0 == GF.add(gf, 5, 2)
    assert 48 == GF.add(gf, 6, 42)
    assert 26 == GF.add(gf, 6, 27)
    assert 37 == GF.add(gf, 7, 30)
    assert 43 == GF.add(gf, 9, 41)
    assert 29 == GF.add(gf, 9, 27)
    assert 28 == GF.add(gf, 9, 26)
    assert 13 == GF.add(gf, 9, 4)
    assert 35 == GF.add(gf, 10, 32)
    assert 18 == GF.add(gf, 10, 8)
    assert 44 == GF.add(gf, 11, 40)
    assert 37 == GF.add(gf, 11, 33)
    assert 9 == GF.add(gf, 11, 5)
    assert 32 == GF.add(gf, 11, 21)
    assert 9 == GF.add(gf, 11, 5)
    assert 46 == GF.add(gf, 12, 41)
    assert 39 == GF.add(gf, 13, 33)
    assert 6 == GF.add(gf, 13, 42)
    assert 25 == GF.add(gf, 15, 10)
    assert 1 == GF.add(gf, 15, 35)
    assert 48 == GF.add(gf, 15, 33)
    assert 23 == GF.add(gf, 16, 7)
    assert 48 == GF.add(gf, 16, 32)
    assert 38 == GF.add(gf, 16, 22)
    assert 4 == GF.add(gf, 16, 37)
    assert 18 == GF.add(gf, 16, 2)
    assert 19 == GF.add(gf, 17, 2)
    assert 46 == GF.add(gf, 17, 29)
    assert 35 == GF.add(gf, 18, 24)
    assert 13 == GF.add(gf, 19, 43)
    assert 4 == GF.add(gf, 19, 41)
    assert 12 == GF.add(gf, 20, 48)
    assert 36 == GF.add(gf, 21, 15)
    assert 32 == GF.add(gf, 21, 11)
    assert 16 == GF.add(gf, 21, 44)
    assert 7 == GF.add(gf, 21, 35)
    assert 11 == GF.add(gf, 22, 38)
    assert 17 == GF.add(gf, 22, 44)
    assert 48 == GF.add(gf, 22, 26)
    assert 46 == GF.add(gf, 22, 24)
    assert 15 == GF.add(gf, 23, 48)
    assert 20 == GF.add(gf, 23, 46)
    assert 21 == GF.add(gf, 24, 4)
    assert 8 == GF.add(gf, 25, 39)
    assert 7 == GF.add(gf, 26, 37)
    assert 14 == GF.add(gf, 27, 43)
    assert 34 == GF.add(gf, 28, 6)
    assert 46 == GF.add(gf, 29, 17)
    assert 45 == GF.add(gf, 29, 16)
    assert 34 == GF.add(gf, 30, 4)
    assert 13 == GF.add(gf, 30, 32)
    assert 33 == GF.add(gf, 31, 2)
    assert 0 == GF.add(gf, 32, 24)
    assert 29 == GF.add(gf, 33, 3)
    assert 34 == GF.add(gf, 34, 0)
    assert 29 == GF.add(gf, 34, 2)
    assert 47 == GF.add(gf, 35, 12)
    assert 39 == GF.add(gf, 35, 4)
    assert 42 == GF.add(gf, 36, 13)
    assert 46 == GF.add(gf, 37, 9)
    assert 2 == GF.add(gf, 38, 20)
    assert 47 == GF.add(gf, 38, 9)
    assert 33 == GF.add(gf, 38, 44)
    assert 41 == GF.add(gf, 39, 2)
    assert 33 == GF.add(gf, 39, 43)
    assert 16 == GF.add(gf, 39, 33)
    assert 12 == GF.add(gf, 40, 21)
    assert 9 == GF.add(gf, 41, 24)
    assert 8 == GF.add(gf, 41, 23)
    assert 48 == GF.add(gf, 41, 7)
    assert 14 == GF.add(gf, 41, 29)
    assert 0 == GF.add(gf, 41, 15)
    assert 45 == GF.add(gf, 42, 3)
    assert 37 == GF.add(gf, 42, 44)
    assert 42 == GF.add(gf, 43, 6)
    assert 7 == GF.add(gf, 44, 19)
    assert 8 == GF.add(gf, 44, 20)
    assert 42 == GF.add(gf, 44, 5)
    assert 11 == GF.add(gf, 45, 15)
    assert 5 == GF.add(gf, 45, 9)
    assert 15 == GF.add(gf, 45, 26)
    assert 11 == GF.add(gf, 46, 14)
    assert 46 == GF.add(gf, 46, 0)
    assert 22 == GF.add(gf, 46, 32)
    assert 4 == GF.add(gf, 46, 7)
    assert 32 == GF.add(gf, 46, 35)
    assert 20 == GF.add(gf, 47, 22)
    assert 2 == GF.add(gf, 48, 10)
    assert 46 == GF.add(gf, 48, 5)
    assert 46 == GF.add(gf, 48, 5)
  end

  @tag :gen_test_add
  test "GF(7, 3) add" do
    gf = GF.new(7, 3, [4,0,6,1])
    assert 153 == GF.add(gf, 0, 153)
    assert 201 == GF.add(gf, 7, 243)
    assert 79 == GF.add(gf, 20, 66)
    assert 43 == GF.add(gf, 22, 21)
    assert 40 == GF.add(gf, 28, 12)
    assert 342 == GF.add(gf, 30, 312)
    assert 217 == GF.add(gf, 31, 242)
    assert 206 == GF.add(gf, 43, 212)
    assert 182 == GF.add(gf, 44, 194)
    assert 294 == GF.add(gf, 44, 306)
    assert 105 == GF.add(gf, 53, 59)
    assert 328 == GF.add(gf, 56, 272)
    assert 14 == GF.add(gf, 58, 306)
    assert 135 == GF.add(gf, 58, 77)
    assert 70 == GF.add(gf, 64, 13)
    assert 206 == GF.add(gf, 66, 189)
    assert 183 == GF.add(gf, 69, 121)
    assert 245 == GF.add(gf, 73, 228)
    assert 316 == GF.add(gf, 76, 247)
    assert 322 == GF.add(gf, 78, 251)
    assert 37 == GF.add(gf, 78, 302)
    assert 278 == GF.add(gf, 81, 197)
    assert 232 == GF.add(gf, 85, 147)
    assert 238 == GF.add(gf, 86, 159)
    assert 326 == GF.add(gf, 86, 289)
    assert 0 == GF.add(gf, 90, 309)
    assert 85 == GF.add(gf, 97, 44)
    assert 125 == GF.add(gf, 97, 77)
    assert 33 == GF.add(gf, 103, 273)
    assert 17 == GF.add(gf, 112, 248)
    assert 60 == GF.add(gf, 112, 340)
    assert 211 == GF.add(gf, 126, 134)
    assert 297 == GF.add(gf, 129, 217)
    assert 115 == GF.add(gf, 132, 39)
    assert 236 == GF.add(gf, 133, 103)
    assert 200 == GF.add(gf, 141, 108)
    assert 8 == GF.add(gf, 141, 259)
    assert 9 == GF.add(gf, 142, 259)
    assert 148 == GF.add(gf, 151, 4)
    assert 82 == GF.add(gf, 151, 274)
    assert 129 == GF.add(gf, 153, 326)
    assert 132 == GF.add(gf, 156, 319)
    assert 89 == GF.add(gf, 157, 275)
    assert 285 == GF.add(gf, 159, 126)
    assert 24 == GF.add(gf, 164, 203)
    assert 288 == GF.add(gf, 173, 122)
    assert 79 == GF.add(gf, 173, 256)
    assert 323 == GF.add(gf, 175, 148)
    assert 29 == GF.add(gf, 188, 240)
    assert 180 == GF.add(gf, 188, 48)
    assert 124 == GF.add(gf, 189, 327)
    assert 0 == GF.add(gf, 191, 208)
    assert 103 == GF.add(gf, 191, 304)
    assert 210 == GF.add(gf, 196, 14)
    assert 124 == GF.add(gf, 203, 264)
    assert 284 == GF.add(gf, 212, 72)
    assert 300 == GF.add(gf, 212, 137)
    assert 234 == GF.add(gf, 212, 22)
    assert 192 == GF.add(gf, 215, 327)
    assert 201 == GF.add(gf, 217, 33)
    assert 325 == GF.add(gf, 218, 107)
    assert 299 == GF.add(gf, 221, 127)
    assert 43 == GF.add(gf, 221, 172)
    assert 223 == GF.add(gf, 224, 48)
    assert 279 == GF.add(gf, 229, 50)
    assert 171 == GF.add(gf, 235, 335)
    assert 206 == GF.add(gf, 236, 26)
    assert 293 == GF.add(gf, 237, 56)
    assert 33 == GF.add(gf, 237, 195)
    assert 254 == GF.add(gf, 237, 73)
    assert 30 == GF.add(gf, 241, 188)
    assert 46 == GF.add(gf, 243, 153)
    assert 61 == GF.add(gf, 244, 216)
    assert 104 == GF.add(gf, 247, 200)
    assert 12 == GF.add(gf, 250, 105)
    assert 329 == GF.add(gf, 251, 85)
    assert 24 == GF.add(gf, 256, 118)
    assert 90 == GF.add(gf, 258, 175)
    assert 301 == GF.add(gf, 258, 50)
    assert 252 == GF.add(gf, 267, 41)
    assert 226 == GF.add(gf, 271, 305)
    assert 296 == GF.add(gf, 271, 81)
    assert 9 == GF.add(gf, 273, 128)
    assert 337 == GF.add(gf, 277, 67)
    assert 274 == GF.add(gf, 277, 4)
    assert 55 == GF.add(gf, 281, 166)
    assert 49 == GF.add(gf, 287, 154)
    assert 48 == GF.add(gf, 290, 101)
    assert 314 == GF.add(gf, 301, 13)
    assert 110 == GF.add(gf, 305, 148)
    assert 275 == GF.add(gf, 307, 318)
    assert 185 == GF.add(gf, 313, 222)
    assert 39 == GF.add(gf, 317, 65)
    assert 100 == GF.add(gf, 318, 181)
    assert 23 == GF.add(gf, 322, 93)
    assert 151 == GF.add(gf, 325, 218)
    assert 261 == GF.add(gf, 331, 322)
    assert 108 == GF.add(gf, 336, 164)
    assert 253 == GF.add(gf, 337, 308)
    assert 166 == GF.add(gf, 338, 220)
  end
end
